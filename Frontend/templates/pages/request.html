<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Request</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="../styles/index.css">
  <link rel="stylesheet" href="../styles/services.css">
  <link rel="stylesheet" href="../styles/request.css">
</head>


<body>
    <nav class="navbar bg-body-tertiary">
    <div class="container-fluid fixed-top" style="background-color: #2AC0A5;  padding: 10px;">
        <a class="navbar-brand" style="color: white" href="./index.html">
            <b>Servify</b>
        <img src="../../images/header.png" alt="Logo" width="30" height="24" class="d-inline-block align-text-top">
        </a>
    </div>
    </nav>  

    <main>
        <section class="bg-light py-5">
            <h2 class="text-center mt-5">Provide us with more details</h2>

            <div class="row mt-4 content-box">
              <div class="col-md-8">
                <!-- Image Upload Container -->
                <div class="image-upload-container card-like mb-4">
                    <div class="row">
                        <div class="col-md-6 text-center d-flex flex-column justify-content-center">
                            <h2 id="upload-title">Attach a picture</h2>
                            <h3>
                              Please upload clear photos for a quick handyman selection
                            </h3>
                        </div>
                        <div class="col-md-6 text-center d-flex flex-column align-items-center justify-content-between">
                          <div id="imagePreview" class="image-preview mt-3"></div>
                          <input type="file" id="imageUpload" accept="image/*" class="d-none">
                          <button id="uploadButton" class="upload-button mt-3">Upload Image</button>
                      </div>
                    </div>
                </div>
                <!-- Choose Timing Container -->
                <div class="image-upload-container card-like mb-4">
                    <div class="row">
                      <div class="col-md-6 text-center d-flex flex-column justify-content-center">
                        <h2 id="upload-title">Choose a Timing</h2>
                        <h3>
                          Please upload clear photos for a quick handyman selection
                        </h3>                      
                      </div>
                      <div class="col-md-6 mt-5 text-center d-flex flex-column justify-content-center">
                        <button class="btn btn-outline-success timing-button"><b>8am to 11am</b></button>
                        <button class="btn btn-outline-success timing-button"><b>12pm to 3pm</b></button>
                        <button class="btn btn-outline-success timing-button"><b>4pm to 7pm</b></button>
                    </div>
                    </div>
                </div>
            </div>
                <div class="col-md-4">
                    <img src="../../images/plumberman.png" alt="Man Image" class="img-fluid">
                </div>
            </div>
            
            
            <div class="text-center mt-5">
              <a href="./map.html" class="btn btn-success next-button"><b>I NEED HELP</b></a>
            </div>
          </section>
    </main>

    <footer class="bg-dark text-white">
        <div class="container-fluid" style="padding: 5px ;">
            <div>
                <h5 class="text-center"><b>Servify</b></h5>
                <p class="text-center"><i>Your one-stop solution for professional services.</i></p>
            </div>
        </div>
    </footer>

    <div id="loading-popup" class="loading-popup">
      <div class="loading-spinner"></div>
      <div class="loading-text">Finding a service provider for you!...</div>
    </div>
  
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      document.getElementById("imageUpload").addEventListener("change", function() {
      const file = this.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function(event) {
            document.getElementById("imagePreview").innerHTML = `<img src="${event.target.result}" alt="Uploaded Image">`;
        }
        reader.readAsDataURL(file);
      }
      });

      document.getElementById("uploadButton").addEventListener("click", function() {
      document.getElementById("imageUpload").click();
      });


      document.addEventListener("DOMContentLoaded", function () {
        let timingButtons = document.querySelectorAll(".timing-button");
        timingButtons.forEach(function (button) {
          button.addEventListener("click", function (event) {
            event.preventDefault(); // Prevent the link action
            timingButtons.forEach((btn) => btn.classList.remove("selected-timing"));
          this.classList.add("selected-timing");
          });
        });
      });


      //Javascript for the loading button
      document.addEventListener("DOMContentLoaded", function () {
        const nextButton = document.querySelector(".next-button");
        const loadingPopup = document.getElementById("loading-popup");

        nextButton.addEventListener("click", function(event) {
        event.preventDefault(); // Prevent the link action
        loadingPopup.style.display = "flex"; // Show the loading popup

        //change this such that only when there is serviceprovider acceptance then move to next page
        setTimeout(function() {
          // Hide the loading popup and navigate to map.html after 2 seconds
          loadingPopup.style.display = "none";
          window.location.href = "./map.html";
          }, 2000);
        });
      });
    </script>
</body>
</html>
